"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[841],{5841:function(e,a,l){l.r(a),l.d(a,{default:function(){return _}});var t=l(6252),i=l(3577),o=l(2262),s=l(6154);let n=localStorage.getItem("token");class c{getBloc(e){let a,l=localStorage.getItem("token");try{const t=s.Z.get(`https://api.plaimmobiliere.online/bloc/Getblocs/${e}`,{headers:{Authorization:`${l}`}});a=t}catch(t){console.error(t)}return a}saveBloc(e,a){let l={type:null,msg:null,summary:null};const t=s.Z.post("https://api.plaimmobiliere.online/Bloc/add",{idres:a,bname:e.name},{headers:{Authorization:`${n}`}}).then((e=>(e.data.success?(l.type="success",l.msg="Résidence ajoutée avec succès",l.summary="Action Terminée"):(l.type="error",l.msg=e.data.msg,l.summary="ERREUR"),l))).catch((e=>(alert("Wrong user account "+e),l)));return t}async updateBloc(e,a){let l={type:null,msg:null,summary:null};try{const t=await s.Z.put(`https://api.plaimmobiliere.online/bloc/update/${a}/`,{blocNameupdate:e.blocName,blocId:e.blocId},{headers:{Authorization:`${n}`}});return t.data.success?(l.type="success",l.msg="Bloc ajoutée avec succès",l.summary="Action Terminée"):(l.type="error",l.msg=t.data.msg,l.summary="ERREUR"),l}catch(t){console.error(t)}}async deleteBloc(e,a){let l={type:null,msg:null,summary:null};try{const t=await s.Z["delete"](`https://api.plaimmobiliere.online/bloc/delete/${a}/${e}`,{headers:{Authorization:`${n}`}});return t.data.success?(l.type="success",l.msg="Bloc supprimé avec succès",l.summary="Action Terminée"):(l.type="error",l.msg=t.data.msg,l.summary="ERREUR"),l}catch(t){console.error(t)}}}var u=l(9201),r=l(2201);const m={class:"grid"},d={class:"col-12"},p={class:"card"},v={class:"my-2"},b={class:"field"},y=(0,t._)("label",{for:"name"},"Nom Bloc",-1),w={class:"field"},h=(0,t._)("label",{for:"name"},"Nom Bloc",-1),g={class:"flex align-items-center justify-content-center"},f=(0,t._)("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),k={key:0};var C={__name:"Blocs",setup(e){(0,o.iH)("");const a=(0,r.yj)(),l=(0,u.p)(),s=(0,o.iH)(null),n=(0,o.iH)(null),C=(0,o.iH)(!1),W=(0,o.iH)(!1),_=(0,o.iH)(!1),B=(0,o.iH)({}),U=(0,o.iH)(!1),x=new c,N=a.params.id;let R=(0,o.iH)(""),P=(0,o.iH)("");const L=()=>{S(N)},S=async e=>{const a=await x.getBloc(e);n.value=a.data},z=()=>{B.value={},U.value=!1,C.value=!0},H=()=>{C.value=!1,_.value=!1,U.value=!1},A=()=>{s.value.exportCSV()},T=async()=>{U.value=!0;try{const e=await x.saveBloc(B.value,N);l.add({severity:e.type,summary:e.summary,detail:e.msg,life:3e3}),C.value=!1,B.value={},L()}catch(e){console.log(e)}},E=e=>{B.value={...e},_.value=!0},$=async()=>{const e=await x.updateBloc(B.value,N);l.add({severity:e.type,summary:e.summary,detail:e.msg,life:3e3}),_.value=!1,B.value={},L()},V=e=>{P=e.name,R=e.blocId,W.value=!0},D=async()=>{const e=await x.deleteBloc(R,N);W.value=!1,P="",R="",l.add({severity:e.type,summary:e.summary,detail:e.msg,life:3e3}),L()};return(0,t.m0)((()=>{"blocs"==a.name&&S(a.params.id)})),(0,t.bv)((async()=>{S(N)})),(e,a)=>{const l=(0,t.up)("Toast"),o=(0,t.up)("Button"),s=(0,t.up)("Toolbar"),c=(0,t.up)("Column"),u=(0,t.up)("DataTable"),r=(0,t.up)("InputText"),U=(0,t.up)("Dialog");return(0,t.wg)(),(0,t.iD)("div",m,[(0,t._)("div",d,[(0,t._)("div",p,[(0,t.Wm)(l),(0,t.Wm)(s,{class:"mb-4"},{start:(0,t.w5)((()=>[(0,t._)("div",v,[(0,t.Wm)(o,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:z})])])),end:(0,t.w5)((()=>[(0,t.Wm)(o,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:a[0]||(a[0]=e=>A(e))})])),_:1}),(0,t.Wm)(u,{value:n.value,dataKey:"name",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Residences",responsiveLayout:"scroll"},{empty:(0,t.w5)((()=>[(0,t.Uk)(" Pas De blocs dans cette residence . ")])),loading:(0,t.w5)((()=>[(0,t.Uk)(" Loading data. Please wait. ")])),default:(0,t.w5)((()=>[(0,t.Wm)(c,{field:"blocName",header:"Nom Bloc",headerStyle:"width:5%; min-width:10rem;"},{body:(0,t.w5)((e=>[(0,t.Uk)((0,i.zw)(e.data.blocName),1)])),_:1}),(0,t.Wm)(c,{field:"etageCounter",header:"Nb Etage",headerStyle:"width:20%; min-width:10rem;"},{body:(0,t.w5)((e=>[(0,t.Uk)((0,i.zw)(e.data.etageCounter),1)])),_:1}),(0,t.Wm)(c,{field:"LocalCounter",header:"Nb LC",headerStyle:"width:20%; min-width:10rem;"},{body:(0,t.w5)((e=>[(0,t.Uk)((0,i.zw)(e.data.LocalCounter),1)])),_:1}),(0,t.Wm)(c,{field:"appartementCounter",header:"Nb Appartement",headerStyle:"width:25%; min-width:10rem;"},{body:(0,t.w5)((e=>[(0,t.Uk)((0,i.zw)(e.data.appartementCounter),1)])),_:1}),(0,t.Wm)(c,{headerStyle:"min-width:10rem;"},{body:(0,t.w5)((e=>[(0,t.Wm)(o,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:a=>E(e.data)},null,8,["onClick"]),(0,t.Wm)(o,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:a=>V(e.data)},null,8,["onClick"])])),_:1})])),_:1},8,["value"]),(0,t.Wm)(U,{visible:C.value,"onUpdate:visible":a[2]||(a[2]=e=>C.value=e),style:{width:"450px"},header:"Ajouter un Bloc",modal:!0,class:"p-fluid"},{footer:(0,t.w5)((()=>[(0,t.Wm)(o,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:H}),(0,t.Wm)(o,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:T,disabled:!B.value.name},null,8,["disabled"])])),default:(0,t.w5)((()=>[(0,t._)("div",b,[y,(0,t.Wm)(r,{autocomplete:"off",id:"name",modelValue:B.value.name,"onUpdate:modelValue":a[1]||(a[1]=e=>B.value.name=e),modelModifiers:{trim:!0},required:"true"},null,8,["modelValue"])])])),_:1},8,["visible"]),(0,t.Wm)(U,{visible:_.value,"onUpdate:visible":a[4]||(a[4]=e=>_.value=e),style:{width:"450px"},header:"Modifier un bloc",modal:!0,class:"p-fluid"},{footer:(0,t.w5)((()=>[(0,t.Wm)(o,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:H}),(0,t.Wm)(o,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:$})])),default:(0,t.w5)((()=>[(0,t._)("div",w,[h,(0,t.Wm)(r,{autocomplete:"off",id:"name",modelValue:B.value.blocName,"onUpdate:modelValue":a[3]||(a[3]=e=>B.value.blocName=e),modelModifiers:{trim:!0},required:"true"},null,8,["modelValue"])])])),_:1},8,["visible"]),(0,t.Wm)(U,{visible:W.value,"onUpdate:visible":a[6]||(a[6]=e=>W.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:(0,t.w5)((()=>[(0,t.Wm)(o,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[5]||(a[5]=e=>W.value=!1)}),(0,t.Wm)(o,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:D})])),default:(0,t.w5)((()=>[(0,t._)("div",g,[f,B.value?((0,t.wg)(),(0,t.iD)("span",k,[(0,t.Uk)(" etes vous sur de suprimer "),(0,t._)("b",null,(0,i.zw)(B.value.name),1),(0,t.Uk)("? cette action va suprimer tous les etages ainsi que vos biens ")])):(0,t.kq)("",!0)])])),_:1},8,["visible"])])])])}}};const W=C;var _=W}}]);
//# sourceMappingURL=841.d31e4ed4.js.map