{"version":3,"file":"js/991.46b16875.js","mappings":"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","sources":["webpack://client/./src/views/depenses/Depensesdash.vue","webpack://client/./src/views/depenses/Depensesdash.vue?1860"],"sourcesContent":["<script setup>\r\nimport { ref, onBeforeMount ,watchEffect   } from 'vue';\r\nimport { useToast } from 'primevue/usetoast';\r\nimport { useRoute } from 'vue-router';\r\nimport axios from 'axios';\r\n\r\nconst AppartmentData = ref(null);\r\nconst route = useRoute();  \r\nconst toast = useToast();\r\nconst Residenceid = route.params.id;\r\nconst dt = ref(null);\r\nconst token=localStorage.getItem('token');\r\n\r\nlet visible=ref(false);\r\n\r\nlet dataofresidences=ref({});\r\n\r\nlet ResDropdownValues = ref([]);\r\nlet BlocdropdownValues = ref([]);\r\nlet EtagedropdownValues = ref([]);\r\nlet AppartdropdownValues = ref([]);\r\nlet ChambredropdownValues = ref([]);\r\n\r\nlet resdropdownValue = ref(null);\r\nlet blocdropdownValue = ref(null);\r\nlet etagedropdownValue = ref(null);\r\nlet appartdropdownValue = ref(null);\r\nlet chambredropdownValue = ref(null);\r\n\r\nlet selectedFournisseurValue = ref(null);\r\n\r\nconst autoFilteredValue = ref([]);\r\nconst ExistantFournisseur = ref([]);\r\n\r\nconst searchLocataire = (event) => {\r\n    setTimeout(() => {\r\n        if (!event.query.trim().length) {\r\n            autoFilteredValue.value = [...ExistantFournisseur.value];\r\n        } else {\r\n            autoFilteredValue.value = ExistantFournisseur.value.filter((country) => {\r\n                return country.name.toLowerCase().startsWith(event.query.toLowerCase());\r\n            });\r\n        }\r\n    }, 50);\r\n};\r\nconst readdatafournisseurs = async () => {\r\n  try {\r\n    const response = await axios.get(`${process.env.VUE_APP_HOST_BACKEND}/depences/get/getres/`, {\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    }\r\n    );\r\n    dataofresidences.value = response.data.residence; // Single residence object\r\n    const residence = response.data.residence; // Single residence object\r\n\r\n    if (residence) {\r\n        residence.forEach((element) => {\r\n            ResDropdownValues.value.push( \r\n                { id: element.Id, name: element.Name }\r\n            );\r\n        });\r\n    } else {\r\n      console.error('No residence found');\r\n    }\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n};\r\n\r\nconst readdataresidence = async () => {\r\n  try {\r\n    const response = await axios.get(`${process.env.VUE_APP_HOST_BACKEND}/depences/get/fournisseurs/`, {\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    });\r\n    response.data.fournisseur.forEach((element) => {\r\n        ExistantFournisseur.value.push( \r\n            { id: element._id, name: element.fullname }\r\n        );\r\n    });\r\n    \r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n};\r\nconst getblocsfromres = (data) =>{\r\n    BlocdropdownValues.value = [];\r\n    let bloc=dataofresidences.value.filter((element) => {\r\n        return element.Id===data.id\r\n    });\r\n    bloc[0].Bloc.forEach((element) => {\r\n        BlocdropdownValues.value.push( \r\n            { id: element.Id, name: element.Name }\r\n        );\r\n    });\r\n}\r\n\r\nconst getetagesbloc = (data) =>{\r\n    let allblocs=dataofresidences.value.filter((element) => {\r\n        return element.Id===resdropdownValue.value.id\r\n    });\r\n    let bloc=allblocs[0].Bloc.filter((element) => {\r\n        return element.Id===data.id\r\n    });\r\n    EtagedropdownValues.value = [];\r\n    bloc[0].Etage.forEach((element) => {\r\n        let numetage;\r\n        if (element.Numetage==0) {\r\n            numetage=\"Etage RDC\"\r\n        }\r\n        else{\r\n            numetage=\"Etage \" +  element.Numetage\r\n        }\r\n\r\n        EtagedropdownValues.value.push( \r\n            { id: element.Id, name: numetage }\r\n        );\r\n    });\r\n}\r\nconst getappartmentsetage = (data)=>{\r\n    let allblocs=dataofresidences.value.filter((element) => {\r\n        return element.Id===resdropdownValue.value.id\r\n    });\r\n    let bloc=allblocs[0].Bloc.filter((element) => {\r\n        return element.Id===blocdropdownValue.value.id\r\n    });\r\n    let etage=bloc[0].Etage.filter((element) => {\r\n        return element.Id===data.id\r\n    });\r\n    AppartdropdownValues.value = [];\r\n    etage[0].Appartement.forEach((element) => {\r\n        AppartdropdownValues.value.push( \r\n            { id: element.Id, name: \"Appartement N° \" + element.Numapp }\r\n        );\r\n    });\r\n}\r\nlet chambredisabledvar=ref(false);\r\nconst getchambappart =(data)=>{\r\n    let allblocs=dataofresidences.value.filter((element) => {\r\n        return element.Id===resdropdownValue.value.id\r\n    });\r\n    let bloc=allblocs[0].Bloc.filter((element) => {\r\n        return element.Id===blocdropdownValue.value.id\r\n    });\r\n    let etage=bloc[0].Etage.filter((element) => {\r\n        return element.Id===etagedropdownValue.value.id\r\n    });\r\n    let appart=etage[0].Appartement.filter((element) => {\r\n        return element.Id===data.id\r\n    });\r\n    ChambredropdownValues.value = [];\r\n    if (appart[0].chambredetails.length==0) {\r\n        chambredisabledvar.value=true;\r\n    }\r\n    else{\r\n        chambredisabledvar.value=false;\r\n        appart[0].chambredetails.forEach((element,index) => {\r\n            ChambredropdownValues.value.push( \r\n                { id: element._id, name: \"Chambre N° \" + (index+1) }\r\n            );\r\n        });\r\n    }\r\n}\r\nconst addmaintenance = () => {\r\n    visible.value = true\r\n    readdataresidence();\r\n    readdatafournisseurs();\r\n};\r\nwatchEffect(() => {\r\n    document.addEventListener('new-saved-fournisseur', () => {\r\n        readdatafournisseurs();\r\n    });\r\n});\r\nconst test=()=>{\r\n    const newPageUrl = '/depenses/Fournisseur'; // Replace with the actual route path you want to navigate to\r\n  window.open(newPageUrl, '_blank');\r\n}\r\n</script>\r\n\r\n<template>\r\n\r\n    <div class=\"grid\">\r\n        <div class=\"col-12\">\r\n            <div class=\"card\">\r\n                <Toast />\r\n                <Toolbar class=\"mb-4\">\r\n                    <template v-slot:start>\r\n                        <div class=\"my-2\">\r\n                            <Button label=\"Ajouter\" icon=\"pi pi-plus\" class=\"p-button-success mr-2\" />\r\n                        </div>\r\n                    </template>\r\n                    \r\n                    <template v-slot:end>\r\n                        <Button label=\"Exporter\" icon=\"pi pi-upload\" class=\"p-button-help\"  />\r\n                        <Button label=\"Show\" icon=\"pi pi-external-link\" @click=\"test()\" />\r\n\r\n                    </template>\r\n                </Toolbar>\r\n                <DataTable\r\n                    ref=\"dt\"\r\n                    :value=\"AppartmentData\"\r\n                    dataKey=\"name\"\r\n                    :paginator=\"true\"\r\n                    :rows=\"10\"\r\n                    paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\"\r\n                    :rowsPerPageOptions=\"[5, 10, 25]\"\r\n                    currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} \"\r\n                    responsiveLayout=\"scroll\"\r\n                    sortField=\"type\" :sortOrder=\"-1\" \r\n                >    \r\n                    <Column field=\"type\" header=\"Type d'appartement\"  headerStyle=\"width:10%; min-width:15rem;\" :sortable=\"true\">\r\n                        <template #body=\"slotProps\">\r\n                            <a v-if=\"slotProps.data.type === 'AC'\" style=\"color: #3b82f6;\">Appartement à Lit</a>\r\n                            <a v-else-if=\"slotProps.data.type === 'AF' && slotProps.data.Isrent\" style=\"color: #ef4444;\">Appartement Famillial</a>\r\n                            <a v-else-if=\"slotProps.data.type === 'AF' && !slotProps.data.Isrent\" style=\"color: #22c55e;\">Appartement Famillial</a>\r\n                        </template>\r\n                    </Column>\r\n                    <Column field=\"blocname\" header=\"Nom Bloc\"  headerStyle=\"width:5%; min-width:10rem;\" :sortable=\"true\">\r\n                        <template #body=\"slotProps\">\r\n                            {{ slotProps.data.blocname }}\r\n                        </template>\r\n                    </Column>\r\n                    <Column field=\"etagenumber\" header=\"Num. etage\"  headerStyle=\"width:15%; min-width:10rem;\" :sortable=\"true\">\r\n                        <template #body=\"slotProps\">\r\n                            {{ slotProps.data.etagenumber ==0 ? \"RDC\" : slotProps.data.etagenumber }}\r\n                        </template>\r\n                    </Column>\r\n                    <Column field=\"numappartement\" header=\"Num App.\" headerStyle=\"width:15%; min-width:10rem;\" :sortable=\"true\">\r\n                        <template #body=\"slotProps\">\r\n                            {{ slotProps.data.numappartement }}\r\n                        </template>\r\n                    </Column>\r\n\r\n                    <Column field=\"Prix\" header=\"Prix\"  headerStyle=\"width:10%; min-width:10rem;\" :sortable=\"true\">\r\n                        <template #body=\"slotProps\" >\r\n                            <div v-if=\"slotProps.data.type == 'AF'\">\r\n                                <a v-if=\"slotProps.data.Isrent\" style=\"color: #ef4444;\">{{ slotProps.data.Prix }} DT</a>\r\n                                <a v-else-if=\" !slotProps.data.Isrent\" style=\"color: #22c55e;\">{{ slotProps.data.Prix }} DT</a>\r\n\r\n                                \r\n                            </div>\r\n                            <div v-else>\r\n                                <a style=\"color: #3b82f6;\">Voir Lit</a>\r\n                            </div>\r\n                        </template>\r\n                    </Column>\r\n                    <Column headerStyle=\"min-width:10rem;\">\r\n                        <template #body=\"slotProps\">\r\n                            <Button icon=\"fas fa-eye\"  class=\"p-button-rounded p-button-secondary mr-2 \" />\r\n                            <Button icon=\"pi pi-pencil\" class=\"p-button-rounded p-button-success mr-2\"  />\r\n                            <Button icon=\"pi pi-trash\"  class=\"p-button-rounded p-button-warning mt-2\"/>\r\n                        </template>\r\n                    </Column>\r\n                </DataTable>\r\n\r\n                <Dialog v-model:visible=\"visible\" modal header=\"Ajouter Maintenance Bien\" :style=\"{ width: '70vw' }\" :breakpoints=\"{ '960px': '75vw', '641px': '100vw' }\">\r\n                    <div class=\"grid\">\r\n                        <div class=\"col-12 lg:col-6\">\r\n                            <div class=\"card p-fluid\">\r\n                                <h5 align=\"center\">Choisir Bien</h5>\r\n                                <div class=\"field\">\r\n                                    <label for=\"name\">Choisir Residence</label>\r\n                                    <Dropdown v-model=\"resdropdownValue\" :options=\"ResDropdownValues\" optionLabel=\"name\" placeholder=\"Select\" @change=\"getblocsfromres(resdropdownValue)\"/>\r\n                                </div>\r\n                                <div class=\"field\">\r\n                                    <label for=\"name\">Choisir Bloc</label>\r\n                                    <Dropdown v-model=\"blocdropdownValue\" :options=\"BlocdropdownValues\" optionLabel=\"name\" placeholder=\"Select\" @change=\"getetagesbloc(blocdropdownValue)\" :disabled=\"!resdropdownValue\"/>\r\n                                </div> \r\n                                <div class=\"field\">\r\n                                    <label for=\"name\">Choisir Etage</label>\r\n                                    <Dropdown v-model=\"etagedropdownValue\" :options=\"EtagedropdownValues\" optionLabel=\"name\" placeholder=\"Select\" @change=\"getappartmentsetage(etagedropdownValue)\" :disabled=\"!blocdropdownValue\"/>\r\n                                </div>\r\n                                <div class=\"field\">\r\n                                    <label for=\"name\">Choisir Appartements</label>\r\n                                    <Dropdown v-model=\"appartdropdownValue\" :options=\"AppartdropdownValues\" optionLabel=\"name\" placeholder=\"Select\" @change=\"getchambappart(appartdropdownValue)\" :disabled=\"!etagedropdownValue\"/>\r\n                                </div>\r\n                                <div class=\"field\">\r\n                                    <label for=\"name\">Choisir Chambre</label>\r\n                                    <Dropdown v-model=\"chambredropdownValue\" :options=\"ChambredropdownValues\" optionLabel=\"name\" placeholder=\"Select\" :disabled=\"chambredisabledvar||!appartdropdownValue\"/>\r\n                                </div> \r\n                            </div>\r\n                            \r\n                        </div>\r\n                        <div class=\"col-12 lg:col-6\">\r\n                            <div class=\"card p-fluid\">\r\n                                <h5 align=\"center\">Maintenance</h5>\r\n                                <div class=\"p-inputgroup flex-1\">\r\n                                    <Button icon=\"pi pi-plus\"/>\r\n                                    <AutoComplete placeholder=\"Search\" :dropdown=\"true\" v-model=\"selectedFournisseurValue\" :suggestions=\"autoFilteredValue\" @complete=\"searchLocataire($event)\"  field=\"name\" />\r\n\r\n                                </div>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                        \r\n                    </div>\r\n                </Dialog>\r\n                    \r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<style scoped>\r\n    @media screen and (min-width: 992px) {\r\n        .input100{\r\n            width: 355% !important;\r\n            display: block;\r\n        }\r\n    }\r\n\r\n    .input100{\r\n        width: 100%;\r\n        display: block;\r\n        color: black;\r\n        opacity: 1 !important;\r\n    }\r\n    .line-seperator{\r\n        border: 3px solid #484bad;\r\n        border-radius: 10px;    \r\n    }\r\n</style>\r\n\r\n","import script from \"./Depensesdash.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Depensesdash.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Depensesdash.vue?vue&type=style&index=0&id=af89938e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\vuejs-pla\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-af89938e\"]])\n\nexport default __exports__"],"names":["AppartmentData","route","dt","params","id","token","localStorage","getItem","visible","dataofresidences","ResDropdownValues","BlocdropdownValues","EtagedropdownValues","AppartdropdownValues","ChambredropdownValues","resdropdownValue","blocdropdownValue","etagedropdownValue","appartdropdownValue","chambredropdownValue","selectedFournisseurValue","autoFilteredValue","ExistantFournisseur","searchLocataire","event","setTimeout","query","trim","length","value","filter","country","name","toLowerCase","startsWith","readdatafournisseurs","async","response","axios","headers","Authorization","data","residence","forEach","element","push","Id","Name","console","error","getblocsfromres","bloc","Bloc","getetagesbloc","allblocs","Etage","numetage","Numetage","getappartmentsetage","etage","Appartement","Numapp","chambredisabledvar","getchambappart","appart","chambredetails","index","_id","document","addEventListener","test","newPageUrl","window","open","__exports__"],"sourceRoot":""}