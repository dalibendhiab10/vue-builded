"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[877],{8877:function(e,l,a){a.r(l),a.d(l,{default:function(){return G}});var i=a(6252),t=a(3577),d=a(2262),n=a(6154);let o=localStorage.getItem("token");class u{getlit(e){let l;try{const a=n.Z.get(`https://api.plaimmobiliere.online/lit/view/${e}`,{headers:{Authorization:`${o}`}});l=a}catch(a){console.error(a)}return l}addlit(e){let l={type:null,msg:null,summary:null},a={prixch:e.Prix,cotionch:e.Cotion};const i=n.Z.post(`https://api.plaimmobiliere.online/lit/add/${e.Residenceid}/${e.blocid}/${e.etageid}/${e.appartmentid}/${e.chambreid}`,a,{headers:{Authorization:`${o}`}}).then((e=>(e.data.success?(l.type="success",l.msg="Lit ajoutée avec succès",l.summary="Action Terminée"):(l.type="error",l.msg=e.data.msg,l.summary="ERREUR"),l))).catch((e=>{alert("Wrong user account "+e)}));return i}updateLit(e){let l={type:null,msg:null,summary:null},a={Prix:e.prixlit,Cotion:e.cautionlit};const i=n.Z.put(`https://api.plaimmobiliere.online/lit/edit/${e.Residenceid}/${e.blocid}/${e.etageid}/${e.appartmentid}/${e.indexch}/${e.indexlit}`,a,{headers:{Authorization:`${o}`}}).then((e=>(e.data.success?(l.type="success",l.msg="Lit modifie avec succès",l.summary="Action Terminée"):(l.type="error",l.msg=e.data.msg,l.summary="ERREUR"),l))).catch((e=>{alert("Wrong user account "+e)}));return i}deleteLit(e){let l={type:null,msg:null,summary:null};const a=n.Z["delete"](`https://api.plaimmobiliere.online/lit/delete/${e.Residenceid}/${e.blocid}/${e.etageid}/${e.appartmentid}/${e.indexch}/${e.indexlit}`,{headers:{Authorization:`${o}`}}).then((e=>(e.data.success?(l.type="success",l.msg="Lit modifie avec succès",l.summary="Action Terminée"):(l.type="error",l.msg=e.data.msg,l.summary="ERREUR"),l))).catch((e=>{alert("Wrong user account "+e)}));return a}}var s=a(9201),r=a(2201);const m={class:"grid"},c={class:"col-12"},p={class:"card"},v={class:"my-2"},b={key:0,style:{color:"#ef4444"}},h={key:1,style:{color:"#22c55e"}},y={key:0,style:{color:"#ef4444"}},g={key:1,style:{color:"#22c55e"}},w={key:0,style:{color:"#ef4444"}},f={key:1,style:{color:"#22c55e"}},x={class:"field"},k=(0,i._)("label",{for:"name"},"Choisir Bloc",-1),U={class:"field"},_=(0,i._)("label",{for:"name"},"Choisir Etage",-1),C={class:"field"},L=(0,i._)("label",{for:"name"},"Choisir Appartements",-1),S={class:"field"},W=(0,i._)("label",{for:"name"},"Choisir Chambre",-1),V={key:0},P={class:"field"},I=(0,i._)("label",null,"Prix Lit",-1),$={class:"field"},R=(0,i._)("label",null,"cautionnement Lit",-1),H={class:"field"},z=(0,i._)("label",{for:"slider"},"Chambre Num",-1),D={class:"field"},A=(0,i._)("label",{for:"slider"},"Lit Num",-1),T={class:"field"},E=(0,i._)("label",{for:"slider"},"Prix Lit",-1),q={class:"field"},N=(0,i._)("label",{for:"slider"},"Prix cautionnement ",-1),M={class:"flex align-items-center justify-content-center"},j=(0,i._)("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Z={key:0},B=(0,i._)("br",null,null,-1);var O={__name:"lits",setup(e){const l=new u,a=(0,d.iH)(null),n=(0,d.iH)(null),o=((0,d.iH)(0),(0,d.iH)(null)),O=(0,r.yj)(),F=(0,s.p)(),G=O.params.id,K=(0,d.iH)(null),Y=(0,d.iH)(!1),J=(0,d.iH)(!1);(0,d.iH)(!1);let Q=(0,d.iH)([]),X=(0,d.iH)([]),ee=(0,d.iH)(null),le=(0,d.iH)(null),ae=(0,d.iH)([]),ie=(0,d.iH)([]),te=(0,d.iH)([]),de=(0,d.iH)([]),ne=(0,d.iH)({}),oe=(0,d.iH)(!1);const ue=()=>{se(G)},se=async e=>{const i=await l.getlit(e);a.value=i.data.staticObject,n.value=i.data.appartements,ee.value=a.value.map((e=>({id:e.blocid,name:e.blocname})))},re=e=>{Q.value=[];const l=a.value.find((l=>l.blocid===e.id));l.etagedata.map((e=>{Q.value.push({id:e.etageid,name:`ETAGE ${e.etagenumber}`})})),ie.value=null,de.value=null},me=e=>{ae.value=[];const l=a.value.find((e=>e.blocid===le.value.id)),i=l.etagedata.find((l=>l.etageid===e.id));i.appartementdata.map((e=>{ae.value.push({id:e.appartmentId,name:`APPARTEMENT ${e.appartmentnumber}`})})),de.value=null},ce=e=>{const l=a.value.find((e=>e.blocid===le.value.id)),i=l.etagedata.find((e=>e.etageid===X.value.id)),t=i.appartementdata.find((l=>l.appartmentId===e.id));te.value=[];for(let a=1;a<=t.nbchabre;a++)te.value.push({id:a,name:`CHAMBRE ${a}`})},pe=()=>{K.value.exportCSV()},ve=(0,d.iH)({}),be=()=>{Y.value=!0,X.value=null,le.value=null,ie.value=null,de.value=null,ve.value={}},he=async()=>{let e={Residenceid:G,blocid:le.value.id,etageid:X.value.id,appartmentid:ie.value.id,chambreid:de.value.id,...ve.value};const a=await l.addlit(e);F.add({severity:a.type,summary:a.summary,detail:a.msg,life:3e3}),Y.value=!1,ue()},ye=e=>{o.value=e,J.value=!0},ge=async()=>{let e={Residenceid:G,blocid:o.value.blocid,etageid:o.value.etageid,appartmentid:o.value.appartmentid,indexch:o.value.Indexchambre,indexlit:o.value.Indexlit,prixlit:o.value.PrixLit,cautionlit:o.value.CotionLit};const a=await l.updateLit(e);F.add({severity:a.type,summary:a.summary,detail:a.msg,life:3e3}),J.value=!1,ue()},we=e=>{ne.value=e,oe.value=!0},fe=async()=>{let e={Residenceid:G,blocid:ne.value.blocid,etageid:ne.value.etageid,appartmentid:ne.value.appartmentid,indexch:ne.value.Indexchambre,indexlit:ne.value.Indexlit,prixlit:ne.value.PrixLit,cautionlit:ne.value.CotionLit};const a=await l.deleteLit(e);F.add({severity:a.type,summary:a.summary,detail:a.msg,life:3e3}),oe.value=!1,ue()};return(0,i.m0)((()=>{"lits"==O.name&&se(O.params.id)})),(0,i.bv)((async()=>{se(G)})),(e,l)=>{const a=(0,i.up)("Toast"),u=(0,i.up)("Button"),s=(0,i.up)("Toolbar"),r=(0,i.up)("Column"),O=(0,i.up)("DataTable"),F=(0,i.up)("Dropdown"),G=(0,i.up)("InputNumber"),ue=(0,i.up)("Dialog"),se=(0,i.up)("InputText");return(0,i.wg)(),(0,i.iD)("div",m,[(0,i._)("div",c,[(0,i._)("div",p,[(0,i.Wm)(a),(0,i.Wm)(s,{class:"mb-4"},{start:(0,i.w5)((()=>[(0,i._)("div",v,[(0,i.Wm)(u,{label:"Ajouter",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:be})])])),end:(0,i.w5)((()=>[(0,i.Wm)(u,{label:"Exporter",icon:"pi pi-upload",class:"p-button-help",onClick:l[0]||(l[0]=e=>pe(e))})])),_:1}),(0,i.Wm)(O,{ref_key:"dt",ref:K,value:n.value,dataKey:"name",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Appartments",responsiveLayout:"scroll"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{field:"residencename",header:"residence",headerStyle:"width:10%; min-width:8rem;"},{body:(0,i.w5)((e=>[(0,i.Uk)((0,t.zw)(e.data.residencename),1)])),_:1}),(0,i.Wm)(r,{field:"etagenumber",header:"Etage",headerStyle:"width:10%; min-width:6rem;"},{body:(0,i.w5)((e=>[(0,i.Uk)((0,t.zw)(0==e.data.etagenumber?"RDC":e.data.etagenumber),1)])),_:1}),(0,i.Wm)(r,{field:"numappartement",header:"Num. Appartement ",headerStyle:"width:15%; min-width:10rem;"},{body:(0,i.w5)((e=>[(0,i.Uk)((0,t.zw)(e.data.numappartement),1)])),_:1}),(0,i.Wm)(r,{field:"Indexchambre",header:"Num Chambre",headerStyle:"width:15%; min-width:10rem;"},{body:(0,i.w5)((e=>[(0,i.Uk)((0,t.zw)(e.data.Indexchambre),1)])),_:1}),(0,i.Wm)(r,{field:"Indexchambre",header:"Num Lit",headerStyle:"width:15%; min-width:10rem;"},{body:(0,i.w5)((e=>[e.data.LitIsrent?((0,i.wg)(),(0,i.iD)("a",b,(0,t.zw)(e.data.Indexlit),1)):e.data.LitIsrent?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("a",h,(0,t.zw)(e.data.Indexlit),1))])),_:1}),(0,i.Wm)(r,{field:"PrixLit",header:"Prix Lit",headerStyle:"width:15%; min-width:10rem;"},{body:(0,i.w5)((e=>[e.data.LitIsrent?((0,i.wg)(),(0,i.iD)("a",y,(0,t.zw)(e.data.PrixLit)+" DT",1)):e.data.LitIsrent?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("a",g,(0,t.zw)(e.data.PrixLit)+" DT",1))])),_:1}),(0,i.Wm)(r,{field:"CotionLit",header:"Cautionnement",headerStyle:"width:15%; min-width:10rem;"},{body:(0,i.w5)((e=>[e.data.LitIsrent?((0,i.wg)(),(0,i.iD)("a",w,(0,t.zw)(e.data.CotionLit)+" DT",1)):e.data.LitIsrent?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("a",f,(0,t.zw)(e.data.CotionLit)+" DT",1))])),_:1}),(0,i.Wm)(r,{headerStyle:"min-width:10rem;"},{body:(0,i.w5)((e=>[(0,i.Wm)(u,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:l=>ye(e.data)},null,8,["onClick"]),(0,i.Wm)(u,{icon:"pi pi-times",class:"p-button-rounded p-button-danger mr-2",onClick:l=>we(e.data)},null,8,["onClick"])])),_:1})])),_:1},8,["value"]),(0,i.Wm)(ue,{visible:Y.value,"onUpdate:visible":l[12]||(l[12]=e=>Y.value=e),style:{width:"450px"},header:"Ajouter Un lit",modal:!0,class:"p-fluid"},{footer:(0,i.w5)((()=>[(0,i.Wm)(u,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:l[10]||(l[10]=e=>Y.value=!1)}),(0,i.Wm)(u,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:l[11]||(l[11]=e=>he()),disabled:!(0,d.SU)(le)||!(0,d.SU)(X)||!(0,d.SU)(ie)||!(0,d.SU)(de)},null,8,["disabled"])])),default:(0,i.w5)((()=>[(0,i._)("div",x,[k,(0,i.Wm)(F,{modelValue:(0,d.SU)(le),"onUpdate:modelValue":l[1]||(l[1]=e=>(0,d.dq)(le)?le.value=e:le=e),options:(0,d.SU)(ee),optionLabel:"name",placeholder:"Select",onChange:l[2]||(l[2]=e=>re((0,d.SU)(le)))},null,8,["modelValue","options"])]),(0,i._)("div",U,[_,(0,i.Wm)(F,{modelValue:(0,d.SU)(X),"onUpdate:modelValue":l[3]||(l[3]=e=>(0,d.dq)(X)?X.value=e:X=e),options:(0,d.SU)(Q),optionLabel:"name",placeholder:"Select",onChange:l[4]||(l[4]=e=>me((0,d.SU)(X)))},null,8,["modelValue","options"])]),(0,i._)("div",C,[L,(0,i.Wm)(F,{modelValue:(0,d.SU)(ie),"onUpdate:modelValue":l[5]||(l[5]=e=>(0,d.dq)(ie)?ie.value=e:ie=e),options:(0,d.SU)(ae),optionLabel:"name",placeholder:"Select",onChange:l[6]||(l[6]=e=>ce((0,d.SU)(ie)))},null,8,["modelValue","options"])]),(0,i._)("div",S,[W,(0,i.Wm)(F,{modelValue:(0,d.SU)(de),"onUpdate:modelValue":l[7]||(l[7]=e=>(0,d.dq)(de)?de.value=e:de=e),options:(0,d.SU)(te),optionLabel:"name",placeholder:"Select"},null,8,["modelValue","options"])]),(0,d.SU)(de)?((0,i.wg)(),(0,i.iD)("div",V,[(0,i._)("div",P,[I,(0,i.Wm)(G,{modelValue:ve.value.Prix,"onUpdate:modelValue":l[8]||(l[8]=e=>ve.value.Prix=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),(0,i._)("div",$,[R,(0,i.Wm)(G,{modelValue:ve.value.Cotion,"onUpdate:modelValue":l[9]||(l[9]=e=>ve.value.Cotion=e),modelModifiers:{trim:!0}},null,8,["modelValue"])])])):(0,i.kq)("",!0)])),_:1},8,["visible"]),(0,i.Wm)(ue,{visible:J.value,"onUpdate:visible":l[19]||(l[19]=e=>J.value=e),style:{width:"450px"},header:"Modifier Nb. de lit",modal:!0,class:"p-fluid"},{footer:(0,i.w5)((()=>[(0,i.Wm)(u,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:l[17]||(l[17]=e=>J.value=!1)}),(0,i.Wm)(u,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:l[18]||(l[18]=e=>ge())})])),default:(0,i.w5)((()=>[(0,i._)("div",H,[z,(0,i.Wm)(se,{modelValue:o.value.Indexchambre,"onUpdate:modelValue":l[13]||(l[13]=e=>o.value.Indexchambre=e),modelModifiers:{number:!0},disabled:"disabled"},null,8,["modelValue"])]),(0,i._)("div",D,[A,(0,i.Wm)(se,{modelValue:o.value.Indexlit,"onUpdate:modelValue":l[14]||(l[14]=e=>o.value.Indexlit=e),modelModifiers:{number:!0},disabled:"disabled"},null,8,["modelValue"])]),(0,i._)("div",T,[E,(0,i.Wm)(se,{modelValue:o.value.PrixLit,"onUpdate:modelValue":l[15]||(l[15]=e=>o.value.PrixLit=e),modelModifiers:{number:!0}},null,8,["modelValue"])]),(0,i._)("div",q,[N,(0,i.Wm)(se,{modelValue:o.value.CotionLit,"onUpdate:modelValue":l[16]||(l[16]=e=>o.value.CotionLit=e),modelModifiers:{number:!0}},null,8,["modelValue"])])])),_:1},8,["visible"]),(0,i.Wm)(ue,{visible:(0,d.SU)(oe),"onUpdate:visible":l[22]||(l[22]=e=>(0,d.dq)(oe)?oe.value=e:oe=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:(0,i.w5)((()=>[(0,i.Wm)(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:l[20]||(l[20]=e=>{(0,d.dq)(oe)?oe.value=!1:oe=!1,(0,d.dq)(ne)?ne.value=null:ne=null})}),(0,i.Wm)(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:l[21]||(l[21]=e=>fe())})])),default:(0,i.w5)((()=>[(0,i._)("div",M,[j,(0,d.SU)(oe)?((0,i.wg)(),(0,i.iD)("span",Z,[(0,i.Uk)("Etes vous sur de suprimer "),B,(0,i.Uk)(" Residence "),(0,i._)("b",null,(0,t.zw)((0,d.SU)(ne).residencename),1),(0,i.Uk)(" Appartement "),(0,i._)("b",null,(0,t.zw)((0,d.SU)(ne).numappartement),1),(0,i.Uk)(" Chambre "),(0,i._)("b",null,(0,t.zw)((0,d.SU)(ne).Indexchambre),1),(0,i.Uk)(" Lit "),(0,i._)("b",null,(0,t.zw)((0,d.SU)(ne).Indexlit),1),(0,i.Uk)(" ?")])):(0,i.kq)("",!0)])])),_:1},8,["visible"])])])])}}};const F=O;var G=F}}]);
//# sourceMappingURL=877.56154dde.js.map